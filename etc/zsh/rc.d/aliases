# ls ã«ã¯å¸¸ã« -F ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹
# --color ãŒä½¿ãˆã‚‹ç’°å¢ƒã§ã¯ --color=auto ã‚’ã¤ã‘ã‚‹
if ls --color --color > /dev/null 2>&1; then
    alias ls='ls -F --color=auto';
else
    alias ls='ls -F';
fi

# csh ãƒ¦ãƒ¼ã‚¶ç”¨
alias unsetenv='unset'
setenv()
{
    if [ $# -eq 0 ]; then
        printenv
    else
        export $1=$*[2,-1]
    fi
}

# M-h ã§èµ·å‹•ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
alias run-help='man'

# ç¬¬2å¼•æ•°ãŒå®Ÿè¡Œå¯èƒ½ã ã£ãŸã‚‰ç¬¬1å¼•æ•°ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦ç¬¬2å¼•æ•°ä»¥é™ã‚’ç™»éŒ²ã™ã‚‹
xalias()
{
    if [ x`whence $2` != "x" ];then
        alias $1="$*[2,-1]"
    fi
}

# less
xalias less jless
xalias less lv

# vi
xalias vi vim
xalias vi nvi
xalias vi jvim

# ftp
xalias ftp ncftp
xalias ftp lftp

# screen ã¨ã‹ kterm ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´ã™ã‚‹
title(){
    print -Pn "\e]0;$*\a"
}

# named directory ã‚’ç™»éŒ²ã™ã‚‹
nd(){
    if [ $# -eq 0 ]; then
        name=`basename $PWD`
        dir=$PWD
    elif [ $# -eq 1 ]; then
        name=$1
        dir=$PWD
    else
        name=$1
        dir=$2
    fi

    eval $name=$dir
    : ~$name
}

# screen ã® shelltitleç”¨
precmd(){
    echo -n '\ek\e\'
}

# screen ç”¨ã® chpwd()
# screen ã®æ™‚ã¯ chpwd(screen_chpwd) ã®ã‚ˆã†ã«ã—ã¦ä½¿ã†
screen_chpwd(){
    title "Y/m/d(D)c:s %n@%m [n] t [%~]"
}

if [ x$TERM = xscreen ]; then
    chpwd(){screen_chpwd}
    chpwd

    preexec() {
        # see [zsh-workers:13180]
        # http://www.zsh.org/mla/workers/2000/msg03993.html
        emulate -L zsh
        local -a cmd; cmd=(${(z)2})
        case $cmd[1] in
            fg)
                if (( $#cmd == 1 )); then
                    cmd=(builtin jobs -l %+)
                else
                    cmd=(builtin jobs -l $cmd[2])
                fi
                ;;
            %*) 
                cmd=(builtin jobs -l $cmd[1])
                ;;
            cd)
                if (( $#cmd == 2)); then
                    cmd[1]=$cmd[2]
                fi
                ;&
            *)
                echo -n "k$cmd[1]:t\\"
                return
                ;;
        esac

        local -A jt; jt=(${(kv)jobtexts})

        $cmd >>(read num rest
            cmd=(${(z)${(e):-\$jt$num}})
            echo -n "k$cmd[1]:t\\") 2>/dev/null
    }
fi

symfony()
{(
  pwd=$PWD
  while true; do
    if [ -f symfony ]; then
      ./symfony $*
      return $?
    elif [ $PWD = / ]; then
      cd $pwd
      command symfony $*
      return $?
    else
      cd ..
    fi
  done
)}
